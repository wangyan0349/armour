{% extends "base-auth.html" %}
{% load crispy_forms_tags static company_tags %}

{% block title %}Organisation Details{% endblock %}

{% block pagetitle %}Organisation Details{% endblock %}

{% block content %}

<form method="post" id="organisation-form" action="{% url 'organization-update' %}" enctype="multipart/form-data">
{{form.media}}
{% csrf_token %}
<div class="row">

    <div class="col-md-6 col-sm-12">
        <div class="card box">
            <h5 class="card-title">Company Information</h5>
                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <div class="form-group">
                            <label>{{form.name.label}}</label>

                            {% for error in form.name.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            {{form.name}}
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12">
                        <div class="form-group">
                            <label>{{form.street.label}}</label>
                            {% for error in form.street.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            <div class="input-group-append">
                                {{form.street}}
                                <div class="input-group-text"><i class="fas fa-map-marker-alt"></i></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <div class="form-group">
                            <label>{{form.zipcode.label}}</label>
                            {% for error in form.zipcode.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            {{form.zipcode}}
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <div class="form-group">
                            <label>{{form.city.label}}</label>
                             {% for error in form.city.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            {{form.city}}
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12">
                        <div class="form-group">
                            <label>{{form.country.label}}</label>
                            {% for error in form.country.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            {{form.country}}
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12">
                        <div class="form-group">
                            <label>{{form.email.label}}</label>
                            {% for error in form.email.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            <div class="input-group-append">
                                {{form.email}}
                                <div class="input-group-text"><i class="fas fa-envelope"></i></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <div class="form-group">
                            <label>{{form.website.label}}</label>
                            {% for error in form.website.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}
                            <div class="input-group-append">
                                {{form.website}}
                                <div class="input-group-text"><i class="fas fa-globe"></i></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <div class="form-group">
                            <label>{{form.image.label}} (max 10 MB)</label>
                            {% for error in form.image.errors %}
                                 <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                            {% endfor %}

                            <div class="input-group-append file">
                                <label for="{{ form.image.id_for_label }}" class="custom-file-upload"></label>
                                <div class="file-upload">
                                    <input type="file" name="image" accept="image/*" id="{{ form.image.auto_id }}">
                                </div>
                                <div class="input-group-text"><i class="fas fa-cloud-upload-alt"></i></div>
                            </div>
                            {% if form.image.value %}
                            <p class="file-info">
                                Currently: <a href="{{ form.image.value.url }}">{{ form.image.value }}</a>
                                {% if not form.image.required %}
                                <span class="file-delete">
                                    <input type="checkbox" name="{{ form.image.name }}-clear" id="{{ form.image.name }}-clear_id"/>
                                    <label for="{{ form.image.name }}-clear_id">Delete</label>
                                </span>
                                {% endif %}
                            </p>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="form-group">
                            <label>{{form.currency.label}}</label>
                            <div class="input-group-append">
                                {{form.currency}}
                                <div class="input-group-text"></div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>

    <div class="col-md-6 col-sm-12">
         <div class="card box">
            <h5 class="card-title">Details</h5>
            <div class="row">
                <div class="col-md-12 col-sm-12">
                    <div class="form-group">
                        <label>{{ form.scope.label }}</label>
                        {% for error in form.scope.errors %}
                            <div class="alert alert-danger"><strong>{{ error|escape }}</strong></div>
                        {% endfor %}
                        {{ form.scope }}
                    </div>
                </div>
            </div>
            <h5 class="card-title">{{form.category.label}}</h5>
            <div class="row check-group">
                {% for error in form.category.errors %}
                    <div class="alert alert-danger col-sm-12"><strong>{{ error|escape }}</strong></div>
                {% endfor %}
                {% for pk, choice in form.category.field.widget.choices %}
                      <div class="col-lg-4 col-sm-12">
                        <div class="form-check">
                            <input class="form-check-input" id="id_{{form.category.name}}_{{ forloop.counter0 }}" name="{{form.category.name}}" {% if pk|in_list:form.category.value %}checked{% endif %} type="checkbox" value="{{pk}}" />
                            <label class="form-check-label" for="id_{{form.category.name}}_{{ forloop.counter0 }}">{{ choice|safe }}</label>
                        </div>
                      </div>
                {% endfor %}
            </div>
            <h5 class="card-title">{{form.req.label}}</h5>
            <div class="row check-group">
                {% for error in form.req.errors %}
                    <div class="alert alert-danger col-sm-12"><strong>{{ error|escape }}</strong></div>
                {% endfor %}
                {% for pk, choice in form.req.field.widget.choices %}
                      <div class="col-lg-4 col-sm-12">
                        <div class="form-check">
                            <input class="form-check-input" id="id_{{form.req.name}}_{{ forloop.counter0 }}" name="{{form.req.name}}" {% if pk|in_list:form.req.value %}checked{% endif %} type="checkbox" value="{{pk}}" />
                            <label class="form-check-label" for="id_{{form.req.name}}_{{ forloop.counter0 }}">{{ choice|safe }}</label>
                        </div>
                      </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="col-md-12 col-sm-12">
        <div class="card box">
            <div class="action-btns">
                <button type="submit" class="btn btn-primary btn-lg"><i class="fas fa-check mr-3"></i></i> Save</button>
            </div>
        </div>
    </div>
</div>
</form>
{% endblock content %}

{% block modal %}
<!-- Action Modal -->
<div class="modal fade" id="actionModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content" id="actionModalContent">
        </div>
    </div>
</div>
{% endblock modal %}

{% block js %}
    {{ block.super }}
    <script src="{% static 'js/jquery.form.min.js' %}"></script>
    <script type="text/javascript">
        var urls={employeeadd:"{% url 'employee-add' %}",
                  employeelist:"{% url 'employee-list' %}",
                  employeeedit:"{% url 'employee-edit' 0 %}",
                  employeedelete:"{% url 'employee-delete' 0 %}"
                 };
    </script>
    <script src="{% static 'js/organization.js' %}"></script>
{% endblock %}
